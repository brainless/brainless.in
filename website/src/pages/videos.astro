---
import Layout from '../layouts/Page.astro';
import VideoCard from '../components/VideoCard.astro';

// Import videos data (will be generated by the script)
let videos = [];
try {
  videos = (await import('../data/videos.json')).default;
} catch (error) {
  console.warn('videos.json not found. Run the fetch_youtube_videos.py script to generate it.');
}
---

<Layout title="Videos" description="My YouTube videos about Vibe Coding and software development.">
  <div class="max-w-3xl mx-auto max-[720px]:max-w-[calc(100%-0.5rem)]">
    {videos.length === 0 ? (
      <div class="text-center text-gray-100 py-8">
        <p>No videos found. Please run the YouTube API script to fetch videos:</p>
        <code class="block mt-2 text-sm bg-gray-800 p-2 rounded">
          cd scripts && python fetch_youtube_videos.py
        </code>
      </div>
    ) : (
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {videos.map((video: any) => (
          <VideoCard video={video} />
        ))}
      </div>
    )}
  </div>
</Layout>
