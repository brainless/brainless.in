---
import { Image } from 'astro:assets';
import { getCollection } from 'astro:content';
import Page from '../../layouts/Page.astro';
import FormattedDate from '../../components/FormattedDate.astro';
import { SITE_DESCRIPTION, SITE_TITLE } from '../../consts';

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<Page title="Blog Posts" description={SITE_DESCRIPTION}>
	<section>
		<ul class="p-0 m-0 list-none max-w-3xl mx-auto">
			{
				posts.map((post, index) => (
					<li class="border border-gray-700 rounded-lg p-4 mb-4 shadow-lg w-full">
						<a
							href={`/blog/${post.id}/`}
							class="block no-underline transition duration-200 ease-in-out group text-gray-light"
						>
							{post.data.heroImage && (
								<Image
									width={720}
									height={360}
									src={post.data.heroImage}
									alt=""
									class="mb-2 rounded-xl group-hover:shadow" />
							)}
							<h4 class="text-xl font-bold mb-2 text-gray-100">
								{post.data.title}
							</h4>
							{post.data.description && <p class="text-gray-light text-sm mb-4">{post.data.description}</p>}
							<class="m-0 text-gray-100 group-hover:text-accent">
								<FormattedDate date={post.data.pubDate} />
							</p>
						</a>
					</li>
				))
			}
		</ul>
	</section>
</Page>
